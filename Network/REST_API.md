# REST API

# REST
- REST는 Representational State Transfer 자원의 상태 전달을 뜻하는 네트워크 아키텍처이다. 이를 통해 문서, 이미지, 데이터 등의 컨텐츠와 기능을 네트워크를 통해서 제공하도록 인터페이스를 만드는 것을 REST API라고 한다.

# REST의 6원칙
- 클라이언트-서버 구조 : 클라이언트와 서버가 서로 독립적으로 분리 되어있어야 한다.
- Stateless : 요청에 대해서 클라이언트의 상태를 서버가 따로 저장하지 않는다. HTTP의 그 특징과 동일하다.
- Cachable : 클라이언트는 서버의 응답을 임시저장 할 수 있어야 하며, 클라이언트가 캐시를 통해서 응답을 재사용할 수 있어야 한다. 이를 통해 서버 부하를 낮춘다. 
- 유니폼 인터페이스(Uniform Interface) : 인터페이스 일관성이라고도 할 수 있으며, 자원에 대한 식별이 가능해야하고, HTTP Method를 통해 자원을 조작할 수 있어야 한다. 
  - 자원의 식별
  - 메시지를 통한 리소스 조작
  - 자기 서술적 메시지
  - 애플리케이션 상태에 대한 엔진으로써 하이퍼 미디어
- Self-descripitveness(자체 표현 구조) : REST API 메시지 만 보고도, 어떤 의도로 구성되어 있는지 직관적으로 알 수 있어야 한다.
- 계층형 구조(Layered System) : 서버와 클라이언트 사이에 방화벽, 게이트웨이, 프록시 등 다양한 계층 형태로 구성이 가능해야 하며, 이를 확장 할 수 있어야 한다.

## 유니폼 인터페이스
- 자원의 식별 : 웹 기반의 REST 에서는 리소스에 접근할 때 URI를 사용한다.
- 메시지를 통한 리소스 조작
- 자기 서술적 메시지 : 요청 하는 데이터가 어떻게 처리 되어져야 하는지 충분한 데이터를 포함할 수 있어야 한다.
- 어플리케이션 상태에 대한 엔진으로써 하이퍼미디어 : REST API를 개발할 때 단순히 클라이언트 요청에 대한 데이터만 응답 해주는 것이 아닌 관련된 리소스에 대해 Link 정보까지 같이 포함 되어져야 한다.

이러한 조건을 잘 갖춘 경우 RESTFul 하다고 표현하며 이를 REST API라고 부른다.

## REST Trade-off
### 장점
- 웹의 장점을 최대한 활용한 아키텍처로 기존의 웹 환경인 TCP/IP 연결을 통해 HTTP를 통해 손쉽게 구현할 수 있다.
- 따라서 별도의 프로토콜이 필요없다.
- 특정 언어 및 기술에 종속되지 않는다.
- API 엔드포인트나 메시지만 가지고 해당 API 의도를 직관적으로 파악할 수 있다.

### 단점
- Overfetching(오버패칭)
  - 필요한 정보값보다 더 많은 정보값을 받게 될 수 있다.
  - 예를들어 오픈웨더API에서 비가 오는지, 기온이 어떤지만 알고 싶지만 API 요청을 하게 되면 풍속, 풍향, 체감온도 등 당장 사용하지 않을 정보까지 받게된다.
- Underfetching(언더패칭)
  - 필요한 정보가 한번에 들어오지 않는다.
  - 버스 관련 API만 하더라도 내가 필요한 정보는 해당 정류소, 정류소 버스정보, 버스 도착정보, 해당 버스의 전체 노선이 알고싶지만 이들 정보를 한번에 얻을 수 있는 데이터는 없다. 다수의 API를 추가 요청해야 한다.
- Endpoint(엔드 포인트)
  - 서비스 규모가 커질수록 엔드포인트가 늘어나 관리하기 어려워진다.
  - 서비스 피봇 및 업데이트로 기존 API 엔드포인트가 삭제되거나 클라이언트 업데이트를 하지 않은 사용자에게 문제가 발생할 수 있다.
    - 이러한 부분의 해결 방법으로, API 설계시 /v1/user, /v2/user 형태로 버전을 관리하기도 한다.
    